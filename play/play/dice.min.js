/*!
 * author:jieyou
 * contacts:baidu hi->youyo1122
 * see https://github.com/jieyou/dice
 */
;(function(f,p,n){var l=[null,{x:90,y:0,z:0},{x:0,y:0,z:0},{x:0,y:90,z:0},{x:0,y:180,z:0},{x:0,y:-90,z:0},{x:-90,y:0,z:180}];var s=[null,{x:270,y:0,z:0},{x:0,y:0,z:0},{x:0,y:270,z:0},{x:180,y:0,z:180},{x:0,y:90,z:0},{x:90,y:0,z:180}];var y={position:"absolute",border:"5px solid #fff",backgroundColor:"#fff",fontSize:"0",textAlign:"center"};function z(A){return Object.prototype.toString.call(A)}var k=Array.isArray||function(A){return z(A)==="[object Array]"};var v=Array.prototype.forEach||function(D){var C=0,B=this,A=B.length;for(;C<A;C++){D.call(B[C],B[C],C)}};var d={tpl:'<div class="dice_circle" style="#{margin};#{border};left:#{left}%;top:#{top}%;width:0;height:0;position:absolute;"></div>',position:[null,[[50,50]],[[50,30],[50,70]],[[28,72],[50,50],[72,28]],[[30,30],[30,70],[70,30],[70,70]],[[28,28],[28,72],[50,50],[72,28],[72,72]],[[28,22.5],[28,50],[28,77.5],[72,22.5],[72,50],[72,77.5]]],html:[null]};(function(A){v.call(A.position,function(D,C){var B=[];if(D){v.call(D,function(F,E){B.push(A.tpl.replace("#{left}",F[0]).replace("#{top}",F[1]))});A.html[C]=B.join("")}});delete A.tpl;delete A.position})(d);function q(){}function h(C,B,A){if(C.addEventListener){C.addEventListener(B,A,false)}else{C.attachEvent("on"+B,A)}}function x(C,B,A){if(C.removeEventListener){C.removeEventListener(B,A,false)}else{C.detachEvent("on"+B,A)}}function b(B,A){if(A){return A+B[0].toUpperCase()+B.substr(1)}return B}var i=(function(){var D=navigator.userAgent.match(/(Android);?[\s\/]+([\d.]+)?/),B,A=false,C=/MSIE/i.test(navigator.userAgent),F=/UCBrowser/i.test(navigator.userAgent),E=/Maxthon/i.test(navigator.userAgent),G=p.createElement("DIV");if(D){B=parseFloat(D[2]);A=!isNaN(B)&&B<3}return function(I){var H;if(A||C||F||E){return false}H=b("transformStyle",I);G.style[H]="preserve-3d";return !!G.style[H].length}})();var t;var w;(function(B,A){if(typeof B.webkitTransform===A&&i("webkit")){t="-webkit-";w="webkit"}else{if(typeof B.MozTransform===A&&i("Moz")){t="-moz-";w="Moz"}else{if(typeof B.msTransform===A&&i("ms")){t="-ms-";w="ms"}else{if(typeof B.transform===A&&i("")){t=w=""}else{t=w=null}}}}})(p.body.style,"string");var r=f.requestAnimationFrame||f[b("requestAnimationFrame",w)]||function(A){return setTimeout(A,17)};var o=f.cancelAnimationFrame||f[b("cancelAnimationFrame",w)]||clearTimeout;function a(B){var A=B.length;if(A===1){return B[0]}return B[Math.floor(Math.random()*A)]}function j(A,D,C){var B;if(arguments.length===3){A.style[D]=C}else{for(B in D){if(D.hasOwnProperty(B)){A.style[B]=D[B]}}}}function c(A){A.dtime=new Date().getTime()-A.stime;if(A.dtime>A.keepAnimationTime){A._onKeepAnimationEnd();e(A);return}if(t!==null){A.rafId=r(function(){c(A)});j(A.wrapper,b("transform",w),"rotate("+A.zAngle+"deg) rotateX("+A.xAngle+"deg) rotateY("+A.yAngle+"deg)");A.curRollIsRotateX?A.yAngle=0:A.xAngle=0;A.zAngle=A.zAngle>360?A.zAngle-360:A.zAngle+10;A.curRollIsRotateX?(A.xAngle=A.xAngle>360?A.xAngle-360:A.xAngle+10):(A.yAngle=A.yAngle>360?A.yAngle-360:A.yAngle+10)}}function e(A){var B;o(A.rafId);A.rafId=null;A.dtime=0;B=s[A.result];h(A.wrapper,b("transitionEnd",w),A._onEndAnimationEnd);h(A.wrapper,b("transitionEnd",w),A._onRollEnd);j(A.wrapper,b("transition",w),t+"transform "+(A.endAnimationTime/1000)+"s ease-out");j(A.wrapper,b("transform",w),"rotate("+B.z+"deg) rotateX("+B.x+"deg) rotateY("+B.y+"deg)")}function g(A){var B;v.call([1,2,3,4,5,6],function(D){var C=A["face"+D];if(D===A.result){B=C.getElementsByTagName("DIV");v.call(B,function(E){E.style.display="none"});C.style.zIndex="2000"}else{C.style.zIndex="1000"}});setTimeout(function(){v.call(B,function(C){C.style.display="block"});A._onNoAnimationEnd();A._onRollEnd()},200)}function u(A,C){var B=this;v.call(["edgeLength","radius","hasShadow","shadowTop","keepAnimationTime","endAnimationTime"],function(E,D){B[E]=C[E]});B._onKeepAnimationEnd=function(){C.onKeepAnimationEnd.call(B,B.result)};B._onEndAnimationEnd=function(){C.onEndAnimationEnd.call(B,B.result)};B._onNoAnimationEnd=function(){C.onNoAnimationEnd.call(B,B.result)};B._onRollEnd=function(){C.onRollEnd.call(B,B.result)};B.zAngle=0;B.yAngle=0;B.xAngle=0;B.rafId=null;B.stime=0;B.dtime=0;if(B.hasShadow){B.shadow=p.createElement("DIV");j(B.shadow,{position:"absolute",left:"50%",top:B.shadowTop+"%",height:"0",width:B.edgeLength*4/10+"px",marginLeft:"-"+B.edgeLength*2/10+"px"});j(B.shadow,w==="Moz"?"boxShadow":b("boxShadow",w),"0 0 "+B.edgeLength+"px "+B.edgeLength*35/100+"px rgba(0, 0, 0, 0.7)");B.shadow.className="dice_shadow";A.appendChild(B.shadow)}v.call(["wrapper","face1","face2","face3","face4","face5","face6"],function(E,D){B[E]=p.createElement("DIV");if(E==="wrapper"){j(B[E],{position:"absolute",height:B.edgeLength+"px",width:B.edgeLength+"px",top:"50%",left:"50%",marginLeft:"-"+(B.edgeLength/2)+"px",marginTop:"-"+(B.edgeLength/2)+"px"});if(t!==null){j(B[E],b("transformStyle",w),"preserve-3d");j(B[E],b("transformOrigin",w),"50% 50%")}B[E].className="dice_wrapper"}else{j(B[E],y);j(B[E],{height:(B.edgeLength-10)+"px",width:(B.edgeLength-10)+"px",borderRadius:B.radius+"px"});if(t!==null){j(B[E],b("transform",w),"rotateX("+l[D].x+"deg) rotateY("+l[D].y+"deg) rotate("+l[D].z+"deg) translateZ("+(B.edgeLength/2)+"px)")}B[E].className="dice_face dice_"+E;B[E].innerHTML=d.html[D].replace(/\#\{margin\}/g,"margin-top:-"+(B.edgeLength/10)+"px;margin-left:-"+(B.edgeLength/10)+"px").replace(/\#\{border\}/g,"border:"+(B.edgeLength/10)+"px #"+((D===1||D===4)?"F":"0")+"00 solid;border-radius:"+(B.edgeLength/10)+"px");B.wrapper.appendChild(B[E])}});j(A,"position","relative");if(t!==null){j(A,b("perspective",w),"800px");j(A,b("perspectiveOrigin",w),"50% 50%")}A.appendChild(B.wrapper)}u.prototype.roll=function(D){var F=this,E,C,A,B=false;if(F.rafId!==null){return}if(k(D)){E=[];v.call(D,function(H,G){C=n(H,10);if(C>=1&&C<=6){E.push(C)}})}else{if(typeof(D)==="number"){E=[D]}}if(!E||(k(E)&&!E.length)){E=[1,2,3,4,5,6]}F.result=a(E);if(t!==null){F.curRollIsRotateX=!!a([0,1]);j(F.wrapper,t+"transition",t+"transform 0s linear");F.stime=new Date().getTime();x(F.wrapper,b("transitionEnd",w),F._onEndAnimationEnd);x(F.wrapper,b("transitionEnd",w),F._onRollEnd);r(function(){c(F)})}else{g(F)}return F.result};u.prototype.stop=function(){var A=this;if(A.rafId!==null){o(A.rafId);A.rafId=null}};var m={edgeLength:100,radius:5,hasShadow:true,shadowTop:75,keepAnimationTime:3000,endAnimationTime:1000,onKeepAnimationEnd:q,onEndAnimationEnd:q,onNoAnimationEnd:q,onRollEnd:q};f.dice=function(A,C){var B,D;if(arguments.length===0){return}if(!C){D=m}else{D={};for(B in m){if(C.hasOwnProperty(B)&&m.hasOwnProperty(B)&&z(m[B])===z(C[B])){D[B]=C[B]}else{D[B]=m[B]}}}return new u(A,D)}})(window,document,parseInt);